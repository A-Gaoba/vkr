import{r as n,j as e,f as M,L as C,b as P,A as E}from"./index-B_5xIYw0.js";const L=a=>{const c=a.match(/Class (\d+)/),l=a.match(/Semester (\d+)/);return{class:c?parseInt(c[1],10):void 0,semester:l?parseInt(l[1],10):void 0}},h=a=>{const{class:c,semester:l}=a;return`${a.name.substring(0,5)}${c}-${l}`},F=({teacher:a})=>e.jsxs("div",{className:"border p-4 flex flex-col justify-center items-center shadow-slate-900 shadow-sm",children:[e.jsx("img",{src:"../../../../../../public/person-svgrepo-com.svg",alt:`${a.firstName} ${a.lastName}`,className:"mb-2 w-32 h-32 object-cover rounded-full"}),e.jsx("p",{className:"text-lg font-semibold",children:`${a.firstName} ${a.middleName||""} ${a.lastName}`}),e.jsx("p",{className:"text-gray-600",children:a.subjects.map(c=>h(c)).join(", ")||"Not specified"}),e.jsx("p",{className:"text-gray-600",children:`ID: ${a.id}`}),e.jsx(C,{to:`/admin/teachers/${a.id}`,children:e.jsx("button",{className:"mt-2 bg-dark-purple text-white px-4 py-2 rounded hover:bg-blue-600",children:"View"})})]}),D=()=>{const[a,c]=n.useState([]),[l,p]=n.useState(null),[d,j]=n.useState(null),[i,r]=n.useState(1),[y,g]=n.useState(!1),[f,b]=n.useState(null),m=10;n.useEffect(()=>{(async()=>{g(!0),b(null);try{const x=(await P.get(`${E}/teachers`)).data.map(o=>({...o,subjects:o.subjects.map(S=>({...S,...L(S.name)}))}));c(x)}catch(t){b("Failed to fetch data"),console.error(t)}finally{g(!1)}})()},[]);const N=a.filter(s=>s.subjects.some(t=>{const x=l?t.class===l:!0,o=d?h(t)===d:!0;return x&&o})),v=(i-1)*m,w=v+m,$=N.slice(v,w),u=Math.ceil(N.length/m),k=s=>{const t=s.target.value?parseInt(s.target.value,10):null;p(t),j(null),r(1)},A=s=>{const t=s.target.value||null;j(t),r(1)};if(y)return e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(M,{})});if(f)return e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("p",{children:["Error: ",f]})});const I=[...new Set(a.flatMap(s=>s.subjects.map(t=>t.class)))],T=l?[...new Set(a.flatMap(s=>s.subjects.filter(t=>t.class===l).map(t=>h(t))))]:[];return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end text-white p-4",children:e.jsx(C,{to:"/admin/teachers/add",children:e.jsx("button",{type:"button",className:"bg-dark-purple p-2 text-white flex items-center mb-4",children:"Add Teacher"})})}),e.jsxs("nav",{className:"bg-white p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-black text-lg font-semibold",children:"Class:"}),e.jsxs("select",{title:"class name",className:"ml-4 p-2 border rounded",value:l||"",onChange:k,children:[e.jsx("option",{value:"",children:"All"}),I.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))]})]}),l&&e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx("span",{className:"text-black text-lg font-semibold",children:"Subject:"}),e.jsxs("select",{title:"subject",className:"ml-4 p-2 border rounded",value:d||"",onChange:A,children:[e.jsx("option",{value:"",children:"All"}),T.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 mt-8",children:$.map(s=>e.jsx(F,{teacher:s},s.id))}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:()=>r(s=>Math.max(s-1,1)),disabled:i===1,className:"px-4 py-2 mx-2 bg-white",children:"Previous"}),[...Array(u)].map((s,t)=>e.jsx("button",{onClick:()=>r(t+1),className:`px-4 py-2 mx-2 ${i===t+1?"bg-dark-purple text-white":"bg-white"}`,children:t+1},t)),e.jsx("button",{onClick:()=>r(s=>Math.min(s+1,u)),disabled:i===u,className:"px-4 py-2 mx-2 bg-white",children:"Next"})]})]})};export{D as default};
