import{j as e,r as i,f as y,b,A as j}from"./index-10Jx05Y7.js";const p=({label:n,type:t,name:r,value:d,onChange:u,required:c=!1,placeholder:o="",className:x="",options:m})=>e.jsxs("div",{className:`mb-4 ${x}`,children:[e.jsxs("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:[n," ",c&&e.jsx("span",{className:"text-red-500",children:"*"}),":"]}),t!=="select"?e.jsx("input",{type:t,name:r,value:d,onChange:u,required:c,placeholder:o,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"}):e.jsxs("select",{name:r,value:d,onChange:u,required:c,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",title:`Select ${n}`,children:[e.jsxs("option",{value:"",children:["Select ",n]}),m&&m.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),S=()=>{const n={name:"",level:1,description:"",subjectIds:[]},[t,r]=i.useState(n),[d,u]=i.useState([]),[c,o]=i.useState(!0),[x,m]=i.useState(null);i.useEffect(()=>{(async()=>{try{const a=await b.get(`${j}/subjects`);u(a.data)}catch(a){console.error("Error fetching subjects",a),m("Failed to fetch subjects")}finally{o(!1)}})()},[]);const l=s=>{const{name:a,value:h}=s.target;r({...t,[a]:h})},f=s=>{var h;const a=(h=t.subjectIds)!=null&&h.includes(s)?t.subjectIds.filter(v=>v!==s):[...t.subjectIds||[],s];r({...t,subjectIds:a})},g=async s=>{s.preventDefault(),o(!0);try{await b.post(`${j}/classes`,t),alert("Class created successfully"),r(n)}catch(a){console.error("Error creating class",a),alert("Error creating class")}finally{o(!1)}};return c?e.jsx(y,{}):x?e.jsx("div",{className:"text-red-500",children:x}):e.jsxs("div",{className:"max-w-5xl mx-auto p-8 bg-white shadow-md rounded-lg",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Create Class"}),e.jsxs("form",{onSubmit:g,className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(p,{label:"Class Name",type:"text",name:"name",value:t.name,onChange:l,required:!0,placeholder:"Enter class name"}),e.jsx(p,{label:"Class Level",type:"number",name:"level",value:t.level,onChange:l,required:!0,placeholder:"Enter class level"}),e.jsx(p,{label:"Description",type:"text",name:"description",value:t.description,onChange:l,required:!0,placeholder:"Enter class description"}),e.jsxs("div",{className:"col-span-full",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"subjects",children:"Subjects"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(s=>{var a;return e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",value:s.id,checked:((a=t.subjectIds)==null?void 0:a.includes(s.id))||!1,onChange:()=>f(s.id)}),e.jsx("span",{className:"ml-2",children:s.name})]},s.id)})})]}),e.jsx("div",{className:"col-span-full text-center",children:e.jsx("button",{type:"submit",className:"bg-dark-purple text-white px-4 py-2 rounded hover:bg-blue-600",children:"Create Class"})})]})]})};export{S as default};
